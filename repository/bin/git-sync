#!/usr/bin/env python

import uuid
import sh


class git(object):
    stash = sh.git.bake('stash', _tty_out=False)
    pull = sh.git.pull
    push = sh.git.push


hint = str(uuid.uuid4())

print git.stash.save(hint).strip()
print git.pull().strip()
print git.push().strip()

stashes = git.stash.list()

for line in stashes:
    if hint in line:
        name, rest = line.split(':', 1)
        print git.stash.pop(name).strip()